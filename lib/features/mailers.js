"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const {
  tryRequire
} = require('../utils/Helpers');

const nodemailer = tryRequire('nodemailer');

const {
  _
} = require('rk-utils');

module.exports = {
  type: Feature.SERVICE,
  load_: async function (app, mailers) {
    _.forOwn(mailers, (options, name) => {
      let transporter = nodemailer.createTransport(options);
      app.registerService(`mailers.${name}`, transporter);
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy9tYWlsZXJzLmpzIl0sIm5hbWVzIjpbIkZlYXR1cmUiLCJyZXF1aXJlIiwidHJ5UmVxdWlyZSIsIm5vZGVtYWlsZXIiLCJfIiwibW9kdWxlIiwiZXhwb3J0cyIsInR5cGUiLCJTRVJWSUNFIiwibG9hZF8iLCJhcHAiLCJtYWlsZXJzIiwiZm9yT3duIiwib3B0aW9ucyIsIm5hbWUiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInJlZ2lzdGVyU2VydmljZSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLGlCQUFELENBQXZCOztBQUNBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFpQkQsT0FBTyxDQUFDLGtCQUFELENBQTlCOztBQUNBLE1BQU1FLFVBQVUsR0FBR0QsVUFBVSxDQUFDLFlBQUQsQ0FBN0I7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQTtBQUFGLElBQVFILE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUVBSSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFNYkMsRUFBQUEsSUFBSSxFQUFFUCxPQUFPLENBQUNRLE9BTkQ7QUFjYkMsRUFBQUEsS0FBSyxFQUFFLGdCQUFnQkMsR0FBaEIsRUFBcUJDLE9BQXJCLEVBQThCO0FBR2pDUCxJQUFBQSxDQUFDLENBQUNRLE1BQUYsQ0FBU0QsT0FBVCxFQUFrQixDQUFDRSxPQUFELEVBQVVDLElBQVYsS0FBbUI7QUFDakMsVUFBSUMsV0FBVyxHQUFHWixVQUFVLENBQUNhLGVBQVgsQ0FBMkJILE9BQTNCLENBQWxCO0FBRUFILE1BQUFBLEdBQUcsQ0FBQ08sZUFBSixDQUFxQixXQUFVSCxJQUFLLEVBQXBDLEVBQXVDQyxXQUF2QztBQUNILEtBSkQ7QUFLSDtBQXRCWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEZlYXR1cmUgPSByZXF1aXJlKCcuLi9lbnVtL0ZlYXR1cmUnKTtcbmNvbnN0IHsgdHJ5UmVxdWlyZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvSGVscGVycycpO1xuY29uc3Qgbm9kZW1haWxlciA9IHRyeVJlcXVpcmUoJ25vZGVtYWlsZXInKTtcbmNvbnN0IHsgXyB9ID0gcmVxdWlyZSgncmstdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZlYXR1cmUgaXMgbG9hZGVkIGF0IGluaXQgc3RhZ2VcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgdHlwZTogRmVhdHVyZS5TRVJWSUNFLFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgZmVhdHVyZVxuICAgICAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgY2xpIGFwcCBtb2R1bGUgb2JqZWN0XG4gICAgICogQHBhcmFtIHtvYmplY3R9IG1haWxlcnMgLSBPcHRpb25zIGZvciB0aGUgZmVhdHVyZSAgICAgXG4gICAgICogQHJldHVybnMge1Byb21pc2UuPCo+fVxuICAgICAqL1xuICAgIGxvYWRfOiBhc3luYyBmdW5jdGlvbiAoYXBwLCBtYWlsZXJzKSB7XG4gICAgICAgIC8vIGNyZWF0ZSByZXVzYWJsZSB0cmFuc3BvcnRlciBvYmplY3QgdXNpbmcgdGhlIGRlZmF1bHQgU01UUCB0cmFuc3BvcnQgICAgICAgIFxuXG4gICAgICAgIF8uZm9yT3duKG1haWxlcnMsIChvcHRpb25zLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBsZXQgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydChvcHRpb25zKTsgICAgXG5cbiAgICAgICAgICAgIGFwcC5yZWdpc3RlclNlcnZpY2UoYG1haWxlcnMuJHtuYW1lfWAsIHRyYW5zcG9ydGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTsiXX0=