"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const {
  _
} = require('@genx/july');

module.exports = {
  type: Feature.SERVICE,
  load_: async function (app, mailers) {
    const nodemailer = app.tryRequire('nodemailer');

    _.forOwn(mailers, (options, name) => {
      let transporter = nodemailer.createTransport(options);
      app.registerService(`mailers.${name}`, transporter);
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy9tYWlsZXJzLmpzIl0sIm5hbWVzIjpbIkZlYXR1cmUiLCJyZXF1aXJlIiwiXyIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0eXBlIiwiU0VSVklDRSIsImxvYWRfIiwiYXBwIiwibWFpbGVycyIsIm5vZGVtYWlsZXIiLCJ0cnlSZXF1aXJlIiwiZm9yT3duIiwib3B0aW9ucyIsIm5hbWUiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInJlZ2lzdGVyU2VydmljZSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLGlCQUFELENBQXZCOztBQUNBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFRRCxPQUFPLENBQUMsWUFBRCxDQUFyQjs7QUFFQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBTWJDLEVBQUFBLElBQUksRUFBRUwsT0FBTyxDQUFDTSxPQU5EO0FBY2JDLEVBQUFBLEtBQUssRUFBRSxnQkFBZ0JDLEdBQWhCLEVBQXFCQyxPQUFyQixFQUE4QjtBQUNqQyxVQUFNQyxVQUFVLEdBQUdGLEdBQUcsQ0FBQ0csVUFBSixDQUFlLFlBQWYsQ0FBbkI7O0FBSUFULElBQUFBLENBQUMsQ0FBQ1UsTUFBRixDQUFTSCxPQUFULEVBQWtCLENBQUNJLE9BQUQsRUFBVUMsSUFBVixLQUFtQjtBQUNqQyxVQUFJQyxXQUFXLEdBQUdMLFVBQVUsQ0FBQ00sZUFBWCxDQUEyQkgsT0FBM0IsQ0FBbEI7QUFFQUwsTUFBQUEsR0FBRyxDQUFDUyxlQUFKLENBQXFCLFdBQVVILElBQUssRUFBcEMsRUFBdUNDLFdBQXZDO0FBQ0gsS0FKRDtBQUtIO0FBeEJZLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRmVhdHVyZSA9IHJlcXVpcmUoJy4uL2VudW0vRmVhdHVyZScpO1xuY29uc3QgeyBfIH0gPSByZXF1aXJlKCdAZ2VueC9qdWx5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmZWF0dXJlIGlzIGxvYWRlZCBhdCBpbml0IHN0YWdlXG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqL1xuICAgIHR5cGU6IEZlYXR1cmUuU0VSVklDRSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGZlYXR1cmVcbiAgICAgKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIGNsaSBhcHAgbW9kdWxlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtYWlsZXJzIC0gT3B0aW9ucyBmb3IgdGhlIGZlYXR1cmUgICAgIFxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlLjwqPn1cbiAgICAgKi9cbiAgICBsb2FkXzogYXN5bmMgZnVuY3Rpb24gKGFwcCwgbWFpbGVycykge1xuICAgICAgICBjb25zdCBub2RlbWFpbGVyID0gYXBwLnRyeVJlcXVpcmUoJ25vZGVtYWlsZXInKTtcblxuICAgICAgICAvLyBjcmVhdGUgcmV1c2FibGUgdHJhbnNwb3J0ZXIgb2JqZWN0IHVzaW5nIHRoZSBkZWZhdWx0IFNNVFAgdHJhbnNwb3J0ICAgICAgICBcblxuICAgICAgICBfLmZvck93bihtYWlsZXJzLCAob3B0aW9ucywgbmFtZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQob3B0aW9ucyk7ICAgIFxuXG4gICAgICAgICAgICBhcHAucmVnaXN0ZXJTZXJ2aWNlKGBtYWlsZXJzLiR7bmFtZX1gLCB0cmFuc3BvcnRlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn07Il19