"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const {
  tryRequire
} = require('../utils/Helpers');

const {
  _
} = require('rk-utils');

module.exports = {
  type: Feature.SERVICE,
  load_: async function (app, mailers) {
    const nodemailer = tryRequire('nodemailer');

    _.forOwn(mailers, (options, name) => {
      let transporter = nodemailer.createTransport(options);
      app.registerService(`mailers.${name}`, transporter);
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy9tYWlsZXJzLmpzIl0sIm5hbWVzIjpbIkZlYXR1cmUiLCJyZXF1aXJlIiwidHJ5UmVxdWlyZSIsIl8iLCJtb2R1bGUiLCJleHBvcnRzIiwidHlwZSIsIlNFUlZJQ0UiLCJsb2FkXyIsImFwcCIsIm1haWxlcnMiLCJub2RlbWFpbGVyIiwiZm9yT3duIiwib3B0aW9ucyIsIm5hbWUiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInJlZ2lzdGVyU2VydmljZSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLGlCQUFELENBQXZCOztBQUNBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFpQkQsT0FBTyxDQUFDLGtCQUFELENBQTlCOztBQUNBLE1BQU07QUFBRUUsRUFBQUE7QUFBRixJQUFRRixPQUFPLENBQUMsVUFBRCxDQUFyQjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBTWJDLEVBQUFBLElBQUksRUFBRU4sT0FBTyxDQUFDTyxPQU5EO0FBY2JDLEVBQUFBLEtBQUssRUFBRSxnQkFBZ0JDLEdBQWhCLEVBQXFCQyxPQUFyQixFQUE4QjtBQUNqQyxVQUFNQyxVQUFVLEdBQUdULFVBQVUsQ0FBQyxZQUFELENBQTdCOztBQUlBQyxJQUFBQSxDQUFDLENBQUNTLE1BQUYsQ0FBU0YsT0FBVCxFQUFrQixDQUFDRyxPQUFELEVBQVVDLElBQVYsS0FBbUI7QUFDakMsVUFBSUMsV0FBVyxHQUFHSixVQUFVLENBQUNLLGVBQVgsQ0FBMkJILE9BQTNCLENBQWxCO0FBRUFKLE1BQUFBLEdBQUcsQ0FBQ1EsZUFBSixDQUFxQixXQUFVSCxJQUFLLEVBQXBDLEVBQXVDQyxXQUF2QztBQUNILEtBSkQ7QUFLSDtBQXhCWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEZlYXR1cmUgPSByZXF1aXJlKCcuLi9lbnVtL0ZlYXR1cmUnKTtcbmNvbnN0IHsgdHJ5UmVxdWlyZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvSGVscGVycycpO1xuY29uc3QgeyBfIH0gPSByZXF1aXJlKCdyay11dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZmVhdHVyZSBpcyBsb2FkZWQgYXQgaW5pdCBzdGFnZVxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKi9cbiAgICB0eXBlOiBGZWF0dXJlLlNFUlZJQ0UsXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBmZWF0dXJlXG4gICAgICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBjbGkgYXBwIG1vZHVsZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbWFpbGVycyAtIE9wdGlvbnMgZm9yIHRoZSBmZWF0dXJlICAgICBcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48Kj59XG4gICAgICovXG4gICAgbG9hZF86IGFzeW5jIGZ1bmN0aW9uIChhcHAsIG1haWxlcnMpIHtcbiAgICAgICAgY29uc3Qgbm9kZW1haWxlciA9IHRyeVJlcXVpcmUoJ25vZGVtYWlsZXInKTtcblxuICAgICAgICAvLyBjcmVhdGUgcmV1c2FibGUgdHJhbnNwb3J0ZXIgb2JqZWN0IHVzaW5nIHRoZSBkZWZhdWx0IFNNVFAgdHJhbnNwb3J0ICAgICAgICBcblxuICAgICAgICBfLmZvck93bihtYWlsZXJzLCAob3B0aW9ucywgbmFtZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQob3B0aW9ucyk7ICAgIFxuXG4gICAgICAgICAgICBhcHAucmVnaXN0ZXJTZXJ2aWNlKGBtYWlsZXJzLiR7bmFtZX1gLCB0cmFuc3BvcnRlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn07Il19