{"version":3,"file":"timezone.js","names":["require","Feature","Literal","module","exports","type","INIT","load_","app","timezone","Error","Luxon","tryRequire","DateTime","now","local","setZone","DEFAULT_TIMEZONE","__"],"sources":["../../src/features/timezone.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Enable timezone feature\n * @module Feature_Timezone\n */\n\nconst Feature = require('../enum/Feature');\nconst Literal = require('../enum/Literal');\n\nmodule.exports = {\n\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    type: Feature.INIT,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {string} timezone - Timezone info\n     * @returns {Promise.<*>}\n     */\n    load_: (app, timezone) => {\n        if (typeof timezone !== 'string') {\n            throw new Error('Timezone value should be a string.');\n        }\n\n        let Luxon = app.tryRequire('luxon');\n        const { DateTime } = Luxon;\n\n        app.now = () => DateTime.local().setZone(timezone || Literal.DEFAULT_TIMEZONE);\n        app.__ = { ...app.__, timezone };\n    }\n};"],"mappings":"AAAA,YAAY,CAACA,OAAA,gCAOb,KAAM,CAAAC,OAAO,CAAGD,OAAO,CAAC,iBAAiB,CAAC,CAC1C,KAAM,CAAAE,OAAO,CAAGF,OAAO,CAAC,iBAAiB,CAAC,CAE1CG,MAAM,CAACC,OAAO,CAAG,CAMbC,IAAI,CAAEJ,OAAO,CAACK,IAAI,CAQlBC,KAAK,CAAEA,CAACC,GAAG,CAAEC,QAAQ,GAAK,CACtB,GAAI,MAAO,CAAAA,QAAQ,GAAK,QAAQ,CAAE,CAC9B,KAAM,IAAI,CAAAC,KAAK,CAAC,oCAAoC,CACxD,CAEA,GAAI,CAAAC,KAAK,CAAGH,GAAG,CAACI,UAAU,CAAC,OAAO,CAAC,CACnC,KAAM,CAAEC,QAAS,CAAC,CAAGF,KAAK,CAE1BH,GAAG,CAACM,GAAG,CAAG,IAAMD,QAAQ,CAACE,KAAK,EAAE,CAACC,OAAO,CAACP,QAAQ,EAAIP,OAAO,CAACe,gBAAgB,CAAC,CAC9ET,GAAG,CAACU,EAAE,CAAG,CAAE,GAAGV,GAAG,CAACU,EAAE,CAAET,QAAS,CACnC,CACJ,CAAC"}