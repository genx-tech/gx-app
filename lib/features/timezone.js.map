{"version":3,"sources":["../../src/features/timezone.js"],"names":["Feature","require","Literal","module","exports","type","INIT","load_","app","timezone","Error","Luxon","tryRequire","DateTime","now","local","setZone","DEFAULT_TIMEZONE","__"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,iBAAD,CAAvB;;AAEAE,MAAM,CAACC,OAAP,GAAiB;AAEb;AACJ;AACA;AACA;AACIC,EAAAA,IAAI,EAAEL,OAAO,CAACM,IAND;;AAQb;AACJ;AACA;AACA;AACA;AACA;AACIC,EAAAA,KAAK,EAAE,CAACC,GAAD,EAAMC,QAAN,KAAmB;AACtB,QAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;AAC9B,YAAM,IAAIC,KAAJ,CAAU,oCAAV,CAAN;AACH;;AAED,QAAIC,KAAK,GAAGH,GAAG,CAACI,UAAJ,CAAe,OAAf,CAAZ;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAeF,KAArB;;AAEAH,IAAAA,GAAG,CAACM,GAAJ,GAAU,MAAMD,QAAQ,CAACE,KAAT,GAAiBC,OAAjB,CAAyBP,QAAQ,IAAIP,OAAO,CAACe,gBAA7C,CAAhB;;AACAT,IAAAA,GAAG,CAACU,EAAJ,GAAS,EAAE,GAAGV,GAAG,CAACU,EAAT;AAAaT,MAAAA;AAAb,KAAT;AACH;AAxBY,CAAjB","sourcesContent":["\"use strict\";\n\n/**\n * Enable timezone feature\n * @module Feature_Timezone\n */\n\nconst Feature = require('../enum/Feature');\nconst Literal = require('../enum/Literal');\n\nmodule.exports = {\n\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    type: Feature.INIT,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {string} timezone - Timezone info\n     * @returns {Promise.<*>}\n     */\n    load_: (app, timezone) => {\n        if (typeof timezone !== 'string') {\n            throw new Error('Timezone value should be a string.');\n        }\n\n        let Luxon = app.tryRequire('luxon');\n        const { DateTime } = Luxon;\n\n        app.now = () => DateTime.local().setZone(timezone || Literal.DEFAULT_TIMEZONE);\n        app.__ = { ...app.__, timezone };\n    }\n};"],"file":"timezone.js"}