{"version":3,"file":"mailers.js","names":["Feature","require","_","module","exports","type","SERVICE","load_","app","mailers","nodemailer","tryRequire","forOwn","options","name","transporter","createTransport","registerService"],"sources":["../../src/features/mailers.js"],"sourcesContent":["const Feature = require('../enum/Feature');\nconst { _ } = require('@genx/july');\n\nmodule.exports = {\n\n    /**\n     * This feature is loaded at init stage\n     * @member {string}\n     */\n    type: Feature.SERVICE,\n\n    /**\n     * Load the feature\n     * @param {App} app - The cli app module object\n     * @param {object} mailers - Options for the feature     \n     * @returns {Promise.<*>}\n     */\n    load_: async function (app, mailers) {\n        const nodemailer = app.tryRequire('nodemailer');\n\n        // create reusable transporter object using the default SMTP transport        \n\n        _.forOwn(mailers, (options, name) => {\n            let transporter = nodemailer.createTransport(options);    \n\n            app.registerService(`mailers.${name}`, transporter);\n        });\n    }\n};"],"mappings":"oDAAA,KAAM,CAAAA,OAAO,CAAGC,OAAO,CAAC,iBAAiB,CAAC,CAC1C,KAAM,CAAEC,CAAE,CAAC,CAAGD,OAAO,CAAC,YAAY,CAAC,CAEnCE,MAAM,CAACC,OAAO,CAAG,CAMbC,IAAI,CAAEL,OAAO,CAACM,OAAO,CAQrBC,KAAK,CAAE,cAAAA,CAAgBC,GAAG,CAAEC,OAAO,CAAE,CACjC,KAAM,CAAAC,UAAU,CAAGF,GAAG,CAACG,UAAU,CAAC,YAAY,CAAC,CAI/CT,CAAC,CAACU,MAAM,CAACH,OAAO,CAAE,CAACI,OAAO,CAAEC,IAAI,GAAK,CACjC,GAAI,CAAAC,WAAW,CAAGL,UAAU,CAACM,eAAe,CAACH,OAAO,CAAC,CAErDL,GAAG,CAACS,eAAe,CAAE,WAAUH,IAAK,EAAC,CAAEC,WAAW,CACtD,CAAC,CACL,CACJ,CAAC"}