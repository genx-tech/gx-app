"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const Literal = require('../enum/Literal');

const {
  tryRequire
} = require('../utils/Helpers');

module.exports = {
  type: Feature.INIT,
  load_: (app, timezone) => {
    if (typeof timezone !== 'string') {
      throw new Error('Timezone value should be a string.');
    }

    let Luxon = tryRequire('luxon');
    const {
      DateTime
    } = Luxon;

    app.now = () => DateTime.local().setZone(timezone || Literal.DEFAULT_TIMEZONE);

    app.__ = { ...app.__,
      timezone
    };
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy90aW1lem9uZS5qcyJdLCJuYW1lcyI6WyJGZWF0dXJlIiwicmVxdWlyZSIsIkxpdGVyYWwiLCJ0cnlSZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInR5cGUiLCJJTklUIiwibG9hZF8iLCJhcHAiLCJ0aW1lem9uZSIsIkVycm9yIiwiTHV4b24iLCJEYXRlVGltZSIsIm5vdyIsImxvY2FsIiwic2V0Wm9uZSIsIkRFRkFVTFRfVElNRVpPTkUiLCJfXyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFPQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxpQkFBRCxDQUF2Qjs7QUFDQSxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxpQkFBRCxDQUF2Qjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBO0FBQUYsSUFBaUJGLE9BQU8sQ0FBQyxrQkFBRCxDQUE5Qjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBTWJDLEVBQUFBLElBQUksRUFBRU4sT0FBTyxDQUFDTyxJQU5EO0FBY2JDLEVBQUFBLEtBQUssRUFBRSxDQUFDQyxHQUFELEVBQU1DLFFBQU4sS0FBbUI7QUFDdEIsUUFBSSxPQUFPQSxRQUFQLEtBQW9CLFFBQXhCLEVBQWtDO0FBQzlCLFlBQU0sSUFBSUMsS0FBSixDQUFVLG9DQUFWLENBQU47QUFDSDs7QUFFRCxRQUFJQyxLQUFLLEdBQUdULFVBQVUsQ0FBQyxPQUFELENBQXRCO0FBQ0EsVUFBTTtBQUFFVSxNQUFBQTtBQUFGLFFBQWVELEtBQXJCOztBQUVBSCxJQUFBQSxHQUFHLENBQUNLLEdBQUosR0FBVSxNQUFNRCxRQUFRLENBQUNFLEtBQVQsR0FBaUJDLE9BQWpCLENBQXlCTixRQUFRLElBQUlSLE9BQU8sQ0FBQ2UsZ0JBQTdDLENBQWhCOztBQUNBUixJQUFBQSxHQUFHLENBQUNTLEVBQUosR0FBUyxFQUFFLEdBQUdULEdBQUcsQ0FBQ1MsRUFBVDtBQUFhUixNQUFBQTtBQUFiLEtBQVQ7QUFDSDtBQXhCWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIEVuYWJsZSB0aW1lem9uZSBmZWF0dXJlXG4gKiBAbW9kdWxlIEZlYXR1cmVfVGltZXpvbmVcbiAqL1xuXG5jb25zdCBGZWF0dXJlID0gcmVxdWlyZSgnLi4vZW51bS9GZWF0dXJlJyk7XG5jb25zdCBMaXRlcmFsID0gcmVxdWlyZSgnLi4vZW51bS9MaXRlcmFsJyk7XG5jb25zdCB7IHRyeVJlcXVpcmUgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL0hlbHBlcnMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZlYXR1cmUgaXMgbG9hZGVkIGF0IHNlcnZpY2Ugc3RhZ2VcbiAgICAgKiBAbWVtYmVyIHtzdHJpbmd9XG4gICAgICovXG4gICAgdHlwZTogRmVhdHVyZS5JTklULFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgZmVhdHVyZVxuICAgICAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgYXBwIG1vZHVsZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGltZXpvbmUgLSBUaW1lem9uZSBpbmZvXG4gICAgICogQHJldHVybnMge1Byb21pc2UuPCo+fVxuICAgICAqL1xuICAgIGxvYWRfOiAoYXBwLCB0aW1lem9uZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHRpbWV6b25lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaW1lem9uZSB2YWx1ZSBzaG91bGQgYmUgYSBzdHJpbmcuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgTHV4b24gPSB0cnlSZXF1aXJlKCdsdXhvbicpO1xuICAgICAgICBjb25zdCB7IERhdGVUaW1lIH0gPSBMdXhvbjtcblxuICAgICAgICBhcHAubm93ID0gKCkgPT4gRGF0ZVRpbWUubG9jYWwoKS5zZXRab25lKHRpbWV6b25lIHx8IExpdGVyYWwuREVGQVVMVF9USU1FWk9ORSk7XG4gICAgICAgIGFwcC5fXyA9IHsgLi4uYXBwLl9fLCB0aW1lem9uZSB9O1xuICAgIH1cbn07Il19