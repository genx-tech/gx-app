"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const Literal = require('../enum/Literal');

module.exports = {
  type: Feature.INIT,
  load_: (app, timezone) => {
    if (typeof timezone !== 'string') {
      throw new Error('Timezone value should be a string.');
    }

    let Luxon = app.tryRequire('luxon');
    const {
      DateTime
    } = Luxon;

    app.now = () => DateTime.local().setZone(timezone || Literal.DEFAULT_TIMEZONE);

    app.__ = { ...app.__,
      timezone
    };
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy90aW1lem9uZS5qcyJdLCJuYW1lcyI6WyJGZWF0dXJlIiwicmVxdWlyZSIsIkxpdGVyYWwiLCJtb2R1bGUiLCJleHBvcnRzIiwidHlwZSIsIklOSVQiLCJsb2FkXyIsImFwcCIsInRpbWV6b25lIiwiRXJyb3IiLCJMdXhvbiIsInRyeVJlcXVpcmUiLCJEYXRlVGltZSIsIm5vdyIsImxvY2FsIiwic2V0Wm9uZSIsIkRFRkFVTFRfVElNRVpPTkUiLCJfXyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFPQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxpQkFBRCxDQUF2Qjs7QUFDQSxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxpQkFBRCxDQUF2Qjs7QUFFQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBTWJDLEVBQUFBLElBQUksRUFBRUwsT0FBTyxDQUFDTSxJQU5EO0FBY2JDLEVBQUFBLEtBQUssRUFBRSxDQUFDQyxHQUFELEVBQU1DLFFBQU4sS0FBbUI7QUFDdEIsUUFBSSxPQUFPQSxRQUFQLEtBQW9CLFFBQXhCLEVBQWtDO0FBQzlCLFlBQU0sSUFBSUMsS0FBSixDQUFVLG9DQUFWLENBQU47QUFDSDs7QUFFRCxRQUFJQyxLQUFLLEdBQUdILEdBQUcsQ0FBQ0ksVUFBSixDQUFlLE9BQWYsQ0FBWjtBQUNBLFVBQU07QUFBRUMsTUFBQUE7QUFBRixRQUFlRixLQUFyQjs7QUFFQUgsSUFBQUEsR0FBRyxDQUFDTSxHQUFKLEdBQVUsTUFBTUQsUUFBUSxDQUFDRSxLQUFULEdBQWlCQyxPQUFqQixDQUF5QlAsUUFBUSxJQUFJUCxPQUFPLENBQUNlLGdCQUE3QyxDQUFoQjs7QUFDQVQsSUFBQUEsR0FBRyxDQUFDVSxFQUFKLEdBQVMsRUFBRSxHQUFHVixHQUFHLENBQUNVLEVBQVQ7QUFBYVQsTUFBQUE7QUFBYixLQUFUO0FBQ0g7QUF4QlksQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBFbmFibGUgdGltZXpvbmUgZmVhdHVyZVxuICogQG1vZHVsZSBGZWF0dXJlX1RpbWV6b25lXG4gKi9cblxuY29uc3QgRmVhdHVyZSA9IHJlcXVpcmUoJy4uL2VudW0vRmVhdHVyZScpO1xuY29uc3QgTGl0ZXJhbCA9IHJlcXVpcmUoJy4uL2VudW0vTGl0ZXJhbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZmVhdHVyZSBpcyBsb2FkZWQgYXQgc2VydmljZSBzdGFnZVxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKi9cbiAgICB0eXBlOiBGZWF0dXJlLklOSVQsXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBmZWF0dXJlXG4gICAgICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBhcHAgbW9kdWxlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aW1lem9uZSAtIFRpbWV6b25lIGluZm9cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48Kj59XG4gICAgICovXG4gICAgbG9hZF86IChhcHAsIHRpbWV6b25lKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdGltZXpvbmUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbWV6b25lIHZhbHVlIHNob3VsZCBiZSBhIHN0cmluZy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBMdXhvbiA9IGFwcC50cnlSZXF1aXJlKCdsdXhvbicpO1xuICAgICAgICBjb25zdCB7IERhdGVUaW1lIH0gPSBMdXhvbjtcblxuICAgICAgICBhcHAubm93ID0gKCkgPT4gRGF0ZVRpbWUubG9jYWwoKS5zZXRab25lKHRpbWV6b25lIHx8IExpdGVyYWwuREVGQVVMVF9USU1FWk9ORSk7XG4gICAgICAgIGFwcC5fXyA9IHsgLi4uYXBwLl9fLCB0aW1lem9uZSB9O1xuICAgIH1cbn07Il19