"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const Literal = require('../enum/Literal');

const {
  tryRequire
} = require('../utils/Helpers');

module.exports = {
  type: Feature.INIT,
  load_: (app, timezone) => {
    if (typeof timezone !== 'string') {
      throw new Error('Timezone value should be a string.');
    }

    let Luxon = tryRequire('luxon');
    const {
      DateTime
    } = Luxon;

    app.now = () => DateTime.local().setZone(timezone || Literal.DEFAULT_TIMEZONE);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy90aW1lem9uZS5qcyJdLCJuYW1lcyI6WyJGZWF0dXJlIiwicmVxdWlyZSIsIkxpdGVyYWwiLCJ0cnlSZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInR5cGUiLCJJTklUIiwibG9hZF8iLCJhcHAiLCJ0aW1lem9uZSIsIkVycm9yIiwiTHV4b24iLCJEYXRlVGltZSIsIm5vdyIsImxvY2FsIiwic2V0Wm9uZSIsIkRFRkFVTFRfVElNRVpPTkUiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBT0EsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsaUJBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsaUJBQUQsQ0FBdkI7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQTtBQUFGLElBQWlCRixPQUFPLENBQUMsa0JBQUQsQ0FBOUI7O0FBRUFHLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQU1iQyxFQUFBQSxJQUFJLEVBQUVOLE9BQU8sQ0FBQ08sSUFORDtBQWNiQyxFQUFBQSxLQUFLLEVBQUUsQ0FBQ0MsR0FBRCxFQUFNQyxRQUFOLEtBQW1CO0FBQ3RCLFFBQUksT0FBT0EsUUFBUCxLQUFvQixRQUF4QixFQUFrQztBQUM5QixZQUFNLElBQUlDLEtBQUosQ0FBVSxvQ0FBVixDQUFOO0FBQ0g7O0FBRUQsUUFBSUMsS0FBSyxHQUFHVCxVQUFVLENBQUMsT0FBRCxDQUF0QjtBQUNBLFVBQU07QUFBRVUsTUFBQUE7QUFBRixRQUFlRCxLQUFyQjs7QUFFQUgsSUFBQUEsR0FBRyxDQUFDSyxHQUFKLEdBQVUsTUFBTUQsUUFBUSxDQUFDRSxLQUFULEdBQWlCQyxPQUFqQixDQUF5Qk4sUUFBUSxJQUFJUixPQUFPLENBQUNlLGdCQUE3QyxDQUFoQjtBQUNIO0FBdkJZLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogRW5hYmxlIHRpbWV6b25lIGZlYXR1cmVcbiAqIEBtb2R1bGUgRmVhdHVyZV9UaW1lem9uZVxuICovXG5cbmNvbnN0IEZlYXR1cmUgPSByZXF1aXJlKCcuLi9lbnVtL0ZlYXR1cmUnKTtcbmNvbnN0IExpdGVyYWwgPSByZXF1aXJlKCcuLi9lbnVtL0xpdGVyYWwnKTtcbmNvbnN0IHsgdHJ5UmVxdWlyZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvSGVscGVycycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZmVhdHVyZSBpcyBsb2FkZWQgYXQgc2VydmljZSBzdGFnZVxuICAgICAqIEBtZW1iZXIge3N0cmluZ31cbiAgICAgKi9cbiAgICB0eXBlOiBGZWF0dXJlLklOSVQsXG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBmZWF0dXJlXG4gICAgICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBhcHAgbW9kdWxlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aW1lem9uZSAtIFRpbWV6b25lIGluZm9cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48Kj59XG4gICAgICovXG4gICAgbG9hZF86IChhcHAsIHRpbWV6b25lKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdGltZXpvbmUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbWV6b25lIHZhbHVlIHNob3VsZCBiZSBhIHN0cmluZy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBMdXhvbiA9IHRyeVJlcXVpcmUoJ2x1eG9uJyk7XG4gICAgICAgIGNvbnN0IHsgRGF0ZVRpbWUgfSA9IEx1eG9uO1xuXG4gICAgICAgIGFwcC5ub3cgPSAoKSA9PiBEYXRlVGltZS5sb2NhbCgpLnNldFpvbmUodGltZXpvbmUgfHwgTGl0ZXJhbC5ERUZBVUxUX1RJTUVaT05FKTtcbiAgICB9XG59OyJdfQ==