{"version":3,"file":"bootstrap.js","names":["require","path","Feature","Literal","eachAsync_","glob","module","exports","type","PLUGIN","load_","app","options","bootPath","toAbsolutePath","join","workingPath","DEFAULT_BOOTSTRAP_PATH","bp","files","nodir","file","bootstrap"],"sources":["../../src/features/bootstrap.js"],"sourcesContent":["\"use strict\";\n\n/**\n * Enable bootstrap scripts\n * @module Feature_Bootstrap\n */\n\nconst path = require(\"path\");\nconst Feature = require(\"../enum/Feature\");\nconst Literal = require(\"../enum/Literal\");\nconst { eachAsync_ } = require(\"@genx/july\");\nconst { glob } = require(\"@genx/sys\");\n\nmodule.exports = {\n    /**\n     * This feature is loaded at plugin stage\n     * @member {string}\n     */\n    type: Feature.PLUGIN,\n\n    /**\n     * Load the feature\n     * @param {App} app - The cli app module object\n     * @param {object} options - Options for the feature\n     * @property {string} [options.path='bootstrap'] - The path of the bootstrap scripts\n     * @returns {Promise.<*>}\n     */\n    load_: async function (app, options) {\n        let bootPath = options.path\n            ? app.toAbsolutePath(options.path)\n            : path.join(app.workingPath, Literal.DEFAULT_BOOTSTRAP_PATH);\n\n        let bp = path.join(bootPath, \"**\", \"*.js\");\n\n        let files = await glob(bp, { nodir: true });\n\n        return eachAsync_(files, async (file) => {\n            let bootstrap = require(file);\n            return bootstrap(app);\n        });\n    },\n};\n"],"mappings":"AAAA,YAAY,CAACA,OAAA,gCAOb,KAAM,CAAAC,IAAI,CAAGD,OAAO,CAAC,MAAM,CAAC,CAC5B,KAAM,CAAAE,OAAO,CAAGF,OAAO,CAAC,iBAAiB,CAAC,CAC1C,KAAM,CAAAG,OAAO,CAAGH,OAAO,CAAC,iBAAiB,CAAC,CAC1C,KAAM,CAAEI,UAAW,CAAC,CAAGJ,OAAO,CAAC,YAAY,CAAC,CAC5C,KAAM,CAAEK,IAAK,CAAC,CAAGL,OAAO,CAAC,WAAW,CAAC,CAErCM,MAAM,CAACC,OAAO,CAAG,CAKbC,IAAI,CAAEN,OAAO,CAACO,MAAM,CASpBC,KAAK,CAAE,cAAAA,CAAgBC,GAAG,CAAEC,OAAO,CAAE,CACjC,GAAI,CAAAC,QAAQ,CAAGD,OAAO,CAACX,IAAI,CACrBU,GAAG,CAACG,cAAc,CAACF,OAAO,CAACX,IAAI,CAAC,CAChCA,IAAI,CAACc,IAAI,CAACJ,GAAG,CAACK,WAAW,CAAEb,OAAO,CAACc,sBAAsB,CAAC,CAEhE,GAAI,CAAAC,EAAE,CAAGjB,IAAI,CAACc,IAAI,CAACF,QAAQ,CAAE,IAAI,CAAE,MAAM,CAAC,CAE1C,GAAI,CAAAM,KAAK,CAAG,KAAM,CAAAd,IAAI,CAACa,EAAE,CAAE,CAAEE,KAAK,CAAE,IAAK,CAAC,CAAC,CAE3C,MAAO,CAAAhB,UAAU,CAACe,KAAK,CAAE,KAAO,CAAAE,IAAI,EAAK,CACrC,GAAI,CAAAC,SAAS,CAAGtB,OAAO,CAACqB,IAAI,CAAC,CAC7B,MAAO,CAAAC,SAAS,CAACX,GAAG,CACxB,CAAC,CACL,CACJ,CAAC"}