"use strict";require("source-map-support/register");const Feature=require("../enum/Feature");const{InvalidConfiguration}=require("@genx/error");const{_}=require("@genx/july");const KEY_ENV="env:";const KEY_STAGE="stage:";const Stage=process.env.STAGE_ENV;module.exports={type:Feature.INIT,load_:function(app,settings){let result={};let envSettings;let stageSettings;_.forOwn(settings,(value,key)=>{if(key.startsWith(KEY_ENV)){let envKey=key.substr(KEY_ENV.length);if(envKey===app.env){envSettings=value;if(!_.isPlainObject(value)){throw new InvalidConfiguration("Invalid env settings",app,`settings.${key}`)}}}else if(Stage&&key.startsWith(KEY_STAGE)){let stageKey=key.substr(KEY_ENV.length);if(stageKey===Stage){stageSettings=value;if(!_.isPlainObject(value)){throw new InvalidConfiguration("Invalid stage settings",app,`settings.${key}`)}}}else{result[key]=value}});app.settings=Object.assign(result,envSettings,stageSettings)}};
//# sourceMappingURL=settings.js.map