"use strict";const winston=require("winston");const winstonFlight=require("winstonflight");const Feature=require("../enum/Feature");const{_}=require("@genx/july");module.exports={type:Feature.SERVICE,load_:function(app,categories){let loggers=new winston.Container;_.forOwn(categories,(loggerConfig,name)=>{if(loggerConfig.transports){loggerConfig.transports=winstonFlight(winston,loggerConfig.transports)}let logger=loggers.add(name,loggerConfig);app.registerService("logger."+name,logger)});app.registerService("loggers",loggers);app.on("stopped",()=>{loggers.close()})}};