{"version":3,"sources":["../../src/features/serviceGroup.js"],"names":["Feature","require","_","eachAsync_","module","exports","type","SERVICE","load_","app","services","instances","serviceName","feature","_loadFeature","serviceOptions","instanceName"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAM;AAAEC,EAAAA,CAAF;AAAKC,EAAAA;AAAL,IAAoBF,OAAO,CAAC,YAAD,CAAjC;AAEA;AACA;AACA;AACA;;;AAEAG,MAAM,CAACC,OAAP,GAAiB;AACb;AACJ;AACA;AACA;AACIC,EAAAA,IAAI,EAAEN,OAAO,CAACO,OALD;;AAOb;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,EAAAA,KAAK,EAAE,gBAAgBC,GAAhB,EAAqBC,QAArB,EAA+B;AAClC,UAAMP,UAAU,CAACO,QAAD,EAAW,OAAOC,SAAP,EAAkBC,WAAlB,KAAkC;AACzD,UAAIC,OAAO,GAAGJ,GAAG,CAACK,YAAJ,CAAiBF,WAAjB,CAAd;;AACA,YAAMT,UAAU,CAACQ,SAAD,EAAY,CAACI,cAAD,EAAiBC,YAAjB,KACxBH,OAAO,CAACL,KAAR,CAAcC,GAAd,EAAmBM,cAAnB,EAAoC,GAAEH,WAAY,IAAGI,YAAa,EAAlE,CADY,CAAhB;AAGH,KALe,CAAhB;AAMH;AAxBY,CAAjB","sourcesContent":["const Feature = require(\"../enum/Feature\");\nconst { _, eachAsync_ } = require(\"@genx/july\");\n\n/**\n * Enable a service group\n * @module Feature_ServiceGroup\n */\n\nmodule.exports = {\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    type: Feature.SERVICE,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {object} services - Map of services from service registration to service instance options\n     * @returns {Promise.<*>}\n     *\n     * @example\n     *\n     * serviceGroup: { 's3DigitalOcean': { '<instanceName>': {  } }   }\n     */\n    load_: async function (app, services) {\n        await eachAsync_(services, async (instances, serviceName) => {\n            let feature = app._loadFeature(serviceName);\n            await eachAsync_(instances, (serviceOptions, instanceName) =>\n                feature.load_(app, serviceOptions, `${serviceName}-${instanceName}`)\n            );\n        });\n    },\n};\n"],"file":"serviceGroup.js"}