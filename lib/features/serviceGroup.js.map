{"version":3,"sources":["../../src/features/serviceGroup.js"],"names":["Feature","require","_","module","exports","type","SERVICE","load_","app","services","loadings","each","instances","serviceName","feature","_loadFeature","serviceOptions","instanceName","push","Promise","all"],"mappings":";;;;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,iBAAD,CAAvB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAQD,OAAO,CAAC,YAAD,CAArB;;AAOAE,MAAM,CAACC,OAAP,GAAiB;AAKbC,EAAAA,IAAI,EAAEL,OAAO,CAACM,OALD;AAiBbC,EAAAA,KAAK,EAAE,gBAAgBC,GAAhB,EAAqBC,QAArB,EAA+B;AAClC,UAAMC,QAAQ,GAAG,EAAjB;;AAEAR,IAAAA,CAAC,CAACS,IAAF,CAAOF,QAAP,EAAiB,CAACG,SAAD,EAAYC,WAAZ,KAA4B;AACzC,UAAIC,OAAO,GAAGN,GAAG,CAACO,YAAJ,CAAiBF,WAAjB,CAAd;;AACAX,MAAAA,CAAC,CAACS,IAAF,CAAOC,SAAP,EAAkB,CAACI,cAAD,EAAiBC,YAAjB,KAAkC;AAChDP,QAAAA,QAAQ,CAACQ,IAAT,CACIJ,OAAO,CACFP,KADL,CACWC,GADX,EACgBQ,cADhB,EACiC,GAAEH,WAAY,IAAGI,YAAa,EAD/D,CADJ;AAIH,OALD;AAMH,KARD;;AAUA,UAAME,OAAO,CAACC,GAAR,CAAYV,QAAZ,CAAN;AACH;AA/BY,CAAjB","sourcesContent":["const Feature = require(\"../enum/Feature\");\nconst { _ } = require(\"@genx/july\");\n\n/**\n * Enable a service group\n * @module Feature_ServiceGroup\n */\n\nmodule.exports = {\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    type: Feature.SERVICE,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {object} services - Map of services from service registration to service instance options\n     * @returns {Promise.<*>}\n     *\n     * @example\n     *\n     * serviceGroup: { 's3DigitalOcean': { '<instanceName>': {  } }   }\n     */\n    load_: async function (app, services) {\n        const loadings = [];\n\n        _.each(services, (instances, serviceName) => {\n            let feature = app._loadFeature(serviceName);\n            _.each(instances, (serviceOptions, instanceName) => {\n                loadings.push(\n                    feature\n                        .load_(app, serviceOptions, `${serviceName}-${instanceName}`)\n                );\n            });\n        });\n\n        await Promise.all(loadings);\n    },\n};\n"],"file":"serviceGroup.js"}