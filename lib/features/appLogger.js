"use strict";

require("source-map-support/register");

const Feature = require('../enum/Feature');

const {
  InvalidConfiguration
} = require('../utils/Errors');

module.exports = {
  type: Feature.PLUGIN,
  load_: (app, loggerName) => {
    let logger = app.getService('logger:' + loggerName);

    if (!logger) {
      throw new InvalidConfiguration(`Logger "${loggerName}" not found.`, app, 'appLogger');
    }

    if (!app.replaceLogger) {
      throw new InvalidConfiguration('Feature "appLogger" can only apply to a Runable App.', app, 'appLogger');
    }

    app.replaceLogger(logger);
    app.on('stopping', () => {
      app.replaceLogger();
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mZWF0dXJlcy9hcHBMb2dnZXIuanMiXSwibmFtZXMiOlsiRmVhdHVyZSIsInJlcXVpcmUiLCJJbnZhbGlkQ29uZmlndXJhdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiLCJ0eXBlIiwiUExVR0lOIiwibG9hZF8iLCJhcHAiLCJsb2dnZXJOYW1lIiwibG9nZ2VyIiwiZ2V0U2VydmljZSIsInJlcGxhY2VMb2dnZXIiLCJvbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFPQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxpQkFBRCxDQUF2Qjs7QUFDQSxNQUFNO0FBQUVDLEVBQUFBO0FBQUYsSUFBMkJELE9BQU8sQ0FBQyxpQkFBRCxDQUF4Qzs7QUFFQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBTWJDLEVBQUFBLElBQUksRUFBRUwsT0FBTyxDQUFDTSxNQU5EO0FBYWJDLEVBQUFBLEtBQUssRUFBRSxDQUFDQyxHQUFELEVBQU1DLFVBQU4sS0FBcUI7QUFDeEIsUUFBSUMsTUFBTSxHQUFHRixHQUFHLENBQUNHLFVBQUosQ0FBZSxZQUFZRixVQUEzQixDQUFiOztBQUVBLFFBQUksQ0FBQ0MsTUFBTCxFQUFhO0FBQ1QsWUFBTSxJQUFJUixvQkFBSixDQUEwQixXQUFVTyxVQUFXLGNBQS9DLEVBQThERCxHQUE5RCxFQUFtRSxXQUFuRSxDQUFOO0FBQ0g7O0FBRUQsUUFBSSxDQUFDQSxHQUFHLENBQUNJLGFBQVQsRUFBd0I7QUFDcEIsWUFBTSxJQUFJVixvQkFBSixDQUF5QixzREFBekIsRUFBaUZNLEdBQWpGLEVBQXNGLFdBQXRGLENBQU47QUFDSDs7QUFFREEsSUFBQUEsR0FBRyxDQUFDSSxhQUFKLENBQWtCRixNQUFsQjtBQUVBRixJQUFBQSxHQUFHLENBQUNLLEVBQUosQ0FBTyxVQUFQLEVBQW1CLE1BQU07QUFDckJMLE1BQUFBLEdBQUcsQ0FBQ0ksYUFBSjtBQUNILEtBRkQ7QUFHSDtBQTdCWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIFJlcGxhY2UgdGhlIGRlZmF1bHQgYXBwIGxvZ2dlclxuICogQG1vZHVsZSBGZWF0dXJlX0FwcExvZ2dlclxuICovXG5cbmNvbnN0IEZlYXR1cmUgPSByZXF1aXJlKCcuLi9lbnVtL0ZlYXR1cmUnKTtcbmNvbnN0IHsgSW52YWxpZENvbmZpZ3VyYXRpb24gfSA9IHJlcXVpcmUoJy4uL3V0aWxzL0Vycm9ycycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgZmVhdHVyZSBpcyBsb2FkZWQgYXQgcGx1Z2luIHN0YWdlXG4gICAgICogQG1lbWJlciB7c3RyaW5nfVxuICAgICAqL1xuICAgIHR5cGU6IEZlYXR1cmUuUExVR0lOLFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgZmVhdHVyZVxuICAgICAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgY2xpIGFwcCBtb2R1bGUgb2JqZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxvZ2dlck5hbWUgLSBUaGUgbG9nZ2VyIG5hbWUgICAgIFxuICAgICAqL1xuICAgIGxvYWRfOiAoYXBwLCBsb2dnZXJOYW1lKSA9PiB7XG4gICAgICAgIGxldCBsb2dnZXIgPSBhcHAuZ2V0U2VydmljZSgnbG9nZ2VyOicgKyBsb2dnZXJOYW1lKTtcblxuICAgICAgICBpZiAoIWxvZ2dlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDb25maWd1cmF0aW9uKGBMb2dnZXIgXCIke2xvZ2dlck5hbWV9XCIgbm90IGZvdW5kLmAsIGFwcCwgJ2FwcExvZ2dlcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhcHAucmVwbGFjZUxvZ2dlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRDb25maWd1cmF0aW9uKCdGZWF0dXJlIFwiYXBwTG9nZ2VyXCIgY2FuIG9ubHkgYXBwbHkgdG8gYSBSdW5hYmxlIEFwcC4nLCBhcHAsICdhcHBMb2dnZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFwcC5yZXBsYWNlTG9nZ2VyKGxvZ2dlcik7XG5cbiAgICAgICAgYXBwLm9uKCdzdG9wcGluZycsICgpID0+IHtcbiAgICAgICAgICAgIGFwcC5yZXBsYWNlTG9nZ2VyKC8qIGJhY2sgdG8gb3JpZ2luYWwgKi8pO1xuICAgICAgICB9KTsgXG4gICAgfVxufTsiXX0=