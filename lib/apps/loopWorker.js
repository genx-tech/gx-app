"use strict";

require("source-map-support/register");

const {
  sleep_
} = require('rk-utils');

const normalWorker = require('./worker');

function startWorker(workingPath, configName, worker, interval, workerName) {
  if (typeof interval === 'undefined') {
    interval = 1000;
  }

  return normalWorker(workingPath, configName, async app => {
    while (true) {
      await worker(app);
      await sleep_(interval);
    }
  }, workerName);
}

module.exports = startWorker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHBzL2xvb3BXb3JrZXIuanMiXSwibmFtZXMiOlsic2xlZXBfIiwicmVxdWlyZSIsIm5vcm1hbFdvcmtlciIsInN0YXJ0V29ya2VyIiwid29ya2luZ1BhdGgiLCJjb25maWdOYW1lIiwid29ya2VyIiwiaW50ZXJ2YWwiLCJ3b3JrZXJOYW1lIiwiYXBwIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFhQyxPQUFPLENBQUMsVUFBRCxDQUExQjs7QUFDQSxNQUFNQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxVQUFELENBQTVCOztBQUVBLFNBQVNFLFdBQVQsQ0FBcUJDLFdBQXJCLEVBQWtDQyxVQUFsQyxFQUE4Q0MsTUFBOUMsRUFBc0RDLFFBQXRELEVBQWdFQyxVQUFoRSxFQUE0RTtBQUN4RSxNQUFJLE9BQU9ELFFBQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDakNBLElBQUFBLFFBQVEsR0FBRyxJQUFYO0FBQ0g7O0FBRUQsU0FBT0wsWUFBWSxDQUFDRSxXQUFELEVBQWNDLFVBQWQsRUFBMEIsTUFBT0ksR0FBUCxJQUFlO0FBQ3hELFdBQU8sSUFBUCxFQUFhO0FBQ1QsWUFBTUgsTUFBTSxDQUFDRyxHQUFELENBQVo7QUFDQSxZQUFNVCxNQUFNLENBQUNPLFFBQUQsQ0FBWjtBQUNIO0FBQ0osR0FMa0IsRUFLaEJDLFVBTGdCLENBQW5CO0FBTUg7O0FBRURFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlIsV0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHNsZWVwXyB9ID0gcmVxdWlyZSgncmstdXRpbHMnKTtcbmNvbnN0IG5vcm1hbFdvcmtlciA9IHJlcXVpcmUoJy4vd29ya2VyJyk7XG5cbmZ1bmN0aW9uIHN0YXJ0V29ya2VyKHdvcmtpbmdQYXRoLCBjb25maWdOYW1lLCB3b3JrZXIsIGludGVydmFsLCB3b3JrZXJOYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBpbnRlcnZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaW50ZXJ2YWwgPSAxMDAwO1xuICAgIH1cblxuICAgIHJldHVybiBub3JtYWxXb3JrZXIod29ya2luZ1BhdGgsIGNvbmZpZ05hbWUsIGFzeW5jIChhcHApID0+IHsgICAgICAgICAgICAgXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCB3b3JrZXIoYXBwKTtcbiAgICAgICAgICAgIGF3YWl0IHNsZWVwXyhpbnRlcnZhbCk7XG4gICAgICAgIH0gICAgICAgICAgICBcbiAgICB9LCB3b3JrZXJOYW1lKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFydFdvcmtlcjsiXX0=