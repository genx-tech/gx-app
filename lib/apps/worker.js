"use strict";

require("source-map-support/register");

function startWorker(workingPath, configName, worker, workerName) {
  const App = require('..');

  let app = new App(workerName || 'Worker', {
    workingPath,
    configName
  });
  app.start_().then(worker).then(() => app.stop_()).catch(error => {
    console.error(error);
    process.exit(1);
  });
}

module.exports = startWorker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHBzL3dvcmtlci5qcyJdLCJuYW1lcyI6WyJzdGFydFdvcmtlciIsIndvcmtpbmdQYXRoIiwiY29uZmlnTmFtZSIsIndvcmtlciIsIndvcmtlck5hbWUiLCJBcHAiLCJyZXF1aXJlIiwiYXBwIiwic3RhcnRfIiwidGhlbiIsInN0b3BfIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJwcm9jZXNzIiwiZXhpdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxTQUFTQSxXQUFULENBQXFCQyxXQUFyQixFQUFrQ0MsVUFBbEMsRUFBOENDLE1BQTlDLEVBQXNEQyxVQUF0RCxFQUFrRTtBQUM5RCxRQUFNQyxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxJQUFELENBQW5COztBQUdBLE1BQUlDLEdBQUcsR0FBRyxJQUFJRixHQUFKLENBQVFELFVBQVUsSUFBSSxRQUF0QixFQUFnQztBQUN0Q0gsSUFBQUEsV0FEc0M7QUFFdENDLElBQUFBO0FBRnNDLEdBQWhDLENBQVY7QUFLQUssRUFBQUEsR0FBRyxDQUFDQyxNQUFKLEdBQWFDLElBQWIsQ0FBa0JOLE1BQWxCLEVBQTBCTSxJQUExQixDQUErQixNQUFNRixHQUFHLENBQUNHLEtBQUosRUFBckMsRUFBa0RDLEtBQWxELENBQXdEQyxLQUFLLElBQUk7QUFDN0RDLElBQUFBLE9BQU8sQ0FBQ0QsS0FBUixDQUFjQSxLQUFkO0FBQ0FFLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLENBQWI7QUFDSCxHQUhEO0FBSUg7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmpCLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc3RhcnRXb3JrZXIod29ya2luZ1BhdGgsIGNvbmZpZ05hbWUsIHdvcmtlciwgd29ya2VyTmFtZSkge1xuICAgIGNvbnN0IEFwcCA9IHJlcXVpcmUoJy4uJyk7XG5cbiAgICAvLyBjcmVhdGUgYSBDbGllbnQgaW5zdGFuY2Ugd2l0aCBjdXN0b20gY29uZmlndXJhdGlvblxuICAgIGxldCBhcHAgPSBuZXcgQXBwKHdvcmtlck5hbWUgfHwgJ1dvcmtlcicsIHtcbiAgICAgICAgd29ya2luZ1BhdGgsXG4gICAgICAgIGNvbmZpZ05hbWVcbiAgICB9KTtcblxuICAgIGFwcC5zdGFydF8oKS50aGVuKHdvcmtlcikudGhlbigoKSA9PiBhcHAuc3RvcF8oKSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YXJ0V29ya2VyOyJdfQ==