"use strict";

require("source-map-support/register");

function startWorker(workingPath, configName, worker, workerName, dontStop) {
  const App = require('..');

  let app = new App(workerName || 'Worker', {
    workingPath,
    configName
  });
  let appStarted = app.start_().then(worker);

  if (!dontStop) {
    appStarted = appStarted.then(() => app.stop_());
  }

  appStarted.catch(error => {
    console.error(error);
    process.exit(1);
  });
}

module.exports = startWorker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHBzL3dvcmtlci5qcyJdLCJuYW1lcyI6WyJzdGFydFdvcmtlciIsIndvcmtpbmdQYXRoIiwiY29uZmlnTmFtZSIsIndvcmtlciIsIndvcmtlck5hbWUiLCJkb250U3RvcCIsIkFwcCIsInJlcXVpcmUiLCJhcHAiLCJhcHBTdGFydGVkIiwic3RhcnRfIiwidGhlbiIsInN0b3BfIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJwcm9jZXNzIiwiZXhpdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxTQUFTQSxXQUFULENBQXFCQyxXQUFyQixFQUFrQ0MsVUFBbEMsRUFBOENDLE1BQTlDLEVBQXNEQyxVQUF0RCxFQUFrRUMsUUFBbEUsRUFBNEU7QUFDeEUsUUFBTUMsR0FBRyxHQUFHQyxPQUFPLENBQUMsSUFBRCxDQUFuQjs7QUFHQSxNQUFJQyxHQUFHLEdBQUcsSUFBSUYsR0FBSixDQUFRRixVQUFVLElBQUksUUFBdEIsRUFBZ0M7QUFDdENILElBQUFBLFdBRHNDO0FBRXRDQyxJQUFBQTtBQUZzQyxHQUFoQyxDQUFWO0FBS0EsTUFBSU8sVUFBVSxHQUFHRCxHQUFHLENBQUNFLE1BQUosR0FBYUMsSUFBYixDQUFrQlIsTUFBbEIsQ0FBakI7O0FBRUEsTUFBSSxDQUFDRSxRQUFMLEVBQWU7QUFDWEksSUFBQUEsVUFBVSxHQUFHQSxVQUFVLENBQUNFLElBQVgsQ0FBZ0IsTUFBTUgsR0FBRyxDQUFDSSxLQUFKLEVBQXRCLENBQWI7QUFDSDs7QUFFREgsRUFBQUEsVUFBVSxDQUFDSSxLQUFYLENBQWlCQyxLQUFLLElBQUk7QUFDdEJDLElBQUFBLE9BQU8sQ0FBQ0QsS0FBUixDQUFjQSxLQUFkO0FBQ0FFLElBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLENBQWI7QUFDSCxHQUhEO0FBSUg7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQm5CLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc3RhcnRXb3JrZXIod29ya2luZ1BhdGgsIGNvbmZpZ05hbWUsIHdvcmtlciwgd29ya2VyTmFtZSwgZG9udFN0b3ApIHtcbiAgICBjb25zdCBBcHAgPSByZXF1aXJlKCcuLicpO1xuXG4gICAgLy8gY3JlYXRlIGEgQ2xpZW50IGluc3RhbmNlIHdpdGggY3VzdG9tIGNvbmZpZ3VyYXRpb25cbiAgICBsZXQgYXBwID0gbmV3IEFwcCh3b3JrZXJOYW1lIHx8ICdXb3JrZXInLCB7XG4gICAgICAgIHdvcmtpbmdQYXRoLFxuICAgICAgICBjb25maWdOYW1lXG4gICAgfSk7XG5cbiAgICBsZXQgYXBwU3RhcnRlZCA9IGFwcC5zdGFydF8oKS50aGVuKHdvcmtlcik7XG4gICAgXG4gICAgaWYgKCFkb250U3RvcCkge1xuICAgICAgICBhcHBTdGFydGVkID0gYXBwU3RhcnRlZC50aGVuKCgpID0+IGFwcC5zdG9wXygpKTtcbiAgICB9XG5cbiAgICBhcHBTdGFydGVkLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFydFdvcmtlcjsiXX0=