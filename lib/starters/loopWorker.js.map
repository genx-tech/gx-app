{"version":3,"file":"loopWorker.js","names":["sleep_","require","startWorker","startLoopWorker","worker","options","interval","workerOptions","app","module","exports"],"sources":["../../src/starters/loopWorker.js"],"sourcesContent":["const { sleep_ } = require('@genx/july');\nconst startWorker = require('./worker');\n\n/**\n * \n * @param {Function} worker \n * @param {object} options \n * @property {integer} [options.interval=1000]\n */\nasync function startLoopWorker(worker, options) {\n    let { interval, ...workerOptions } = options;\n\n    if (typeof interval === 'undefined') {\n        interval = 1000;\n    }\n\n    return startWorker(async (app) => {             \n        while (true) {\n            await worker(app);\n            await sleep_(interval);\n        }            \n    }, workerOptions);\n}\n\nmodule.exports = startLoopWorker;"],"mappings":"oDAAA,KAAM,CAAEA,MAAO,CAAC,CAAGC,OAAO,CAAC,YAAY,CAAC,CACxC,KAAM,CAAAC,WAAW,CAAGD,OAAO,CAAC,UAAU,CAAC,CAQvC,cAAe,CAAAE,eAAeA,CAACC,MAAM,CAAEC,OAAO,CAAE,CAC5C,GAAI,CAAEC,QAAQ,CAAE,GAAGC,aAAc,CAAC,CAAGF,OAAO,CAE5C,GAAI,MAAO,CAAAC,QAAQ,GAAK,WAAW,CAAE,CACjCA,QAAQ,CAAG,IACf,CAEA,MAAO,CAAAJ,WAAW,CAAC,KAAO,CAAAM,GAAG,EAAK,CAC9B,MAAO,IAAI,CAAE,CACT,KAAM,CAAAJ,MAAM,CAACI,GAAG,CAAC,CACjB,KAAM,CAAAR,MAAM,CAACM,QAAQ,CACzB,CACJ,CAAC,CAAEC,aAAa,CACpB,CAEAE,MAAM,CAACC,OAAO,CAAGP,eAAe"}